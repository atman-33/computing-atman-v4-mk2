## Referance URL

https://www.engilaboo.com/nextjs-graphql/

## Install packages

```bash
npm i @graphql-codegen/typed-document-node @graphql-codegen/cli @graphql-codegen/typescript-operations @apollo/client
```

## Update app.module.ts

Add below code.

 `autoSchemaFile: path.join(__dirname, './autogenerated-schema.gql')`

```ts
@Module({
  imports: [
    ServeStaticModule.forRoot({
      rootPath: join(__dirname, '..', 'web/.next'),
      exclude: ['/api/*', '/api/graphql']
    }),
    GraphQLModule.forRoot<ApolloDriverConfig>({
      driver: ApolloDriver,
      path: '/api/graphql',
      autoSchemaFile: path.join(__dirname, './autogenerated-schema.gql')
    }),
```

By doing so, autogenerated-schema.gql is created in `dist/apps/api` folder after that api build.

## Generate data-access-graphql project

```bash
npx nx generate @nx/js:library data-access-graphql --directory=libs/web/data-access-graphql --importPath=@libs/web/data-access-graphql --tags=scope:web --bundler=swc

✔ Which unit test runner would you like to use? · none
```

## Create codegen.yml

 `tools/graphql-codegen/codegen.yml`

## Run codegen

Add script to package.json

```json
   "scripts": {
    "start:gql:watch": "graphql-codegen --config tools/graphql-codegen/codegen.yml --watch",
 ```

## Create graphql-client.ts

 `libs/web/data-access-graphql/src/lib/graphql-client.ts`

## Update index.ts

Fix export.

 `libs/web/data-access-graphql/src/index.ts`
